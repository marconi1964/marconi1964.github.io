<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«– | TensorFlow Lite for Microcontroller (TFLM)</title>
  <meta name="description" content="Chapter 5 Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«– | TensorFlow Lite for Microcontroller (TFLM)" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«– | TensorFlow Lite for Microcontroller (TFLM)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 5 Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«– | TensorFlow Lite for Microcontroller (TFLM)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«– | TensorFlow Lite for Microcontroller (TFLM)" />
  
  <meta name="twitter:description" content="Chapter 5 Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«– | TensorFlow Lite for Microcontroller (TFLM)" />
  

<meta name="author" content="marconi1964@yahoo.com or marconi.jiang@gmail.com" />


<meta name="date" content="2021-05-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chap-hello-world-training.html"/>
<link rel="next" href="chap-micro-speech-inference.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">TensorFlow Lite for Microcontroller</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> å‰è¨€</a></li>
<li class="chapter" data-level="2" data-path="chap-intro.html"><a href="chap-intro.html"><i class="fa fa-check"></i><b>2</b> Introducing TFLM (TensorFlow Lite for Microcontroller)</a></li>
<li class="chapter" data-level="3" data-path="prerequisite-.html"><a href="prerequisite-.html"><i class="fa fa-check"></i><b>3</b> Prerequisite æº–å‚™å·¥ä½œ</a>
<ul>
<li class="chapter" data-level="3.1" data-path="prerequisite-.html"><a href="prerequisite-.html#git"><i class="fa fa-check"></i><b>3.1</b> git åŠ github ç°¡å–®æ“ä½œ</a></li>
<li class="chapter" data-level="3.2" data-path="prerequisite-.html"><a href="prerequisite-.html#make"><i class="fa fa-check"></i><b>3.2</b> èªè­˜ make åŠç°¡å–®æ“ä½œ (mbed cli çš„æ“ä½œå¿…å‚™æŠ€èƒ½ä¹‹ä¸€)</a></li>
<li class="chapter" data-level="3.3" data-path="prerequisite-.html"><a href="prerequisite-.html#vmware"><i class="fa fa-check"></i><b>3.3</b> åœ¨ Windows 10 ä¸‹å®‰è£ VMware Workstation Player åŠ Ubuntu 18.04</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="prerequisite-.html"><a href="prerequisite-.html#äº‹å…ˆæº–å‚™"><i class="fa fa-check"></i><b>3.3.1</b> 0. äº‹å…ˆæº–å‚™</a></li>
<li class="chapter" data-level="3.3.2" data-path="prerequisite-.html"><a href="prerequisite-.html#ä¸‹è¼‰-ubuntu-18.04-iso-image-æª”æ¡ˆ-é›»è…¦éœ€è¦è‡³å°‘-20gb-ä»¥ä¸Šç¡¬ç¢Ÿç©ºé–“-é ä¼°ä¸‹è¼‰æ™‚é–“-7-åˆ†é˜"><i class="fa fa-check"></i><b>3.3.2</b> 1. ä¸‹è¼‰ Ubuntu 18.04 ISO image æª”æ¡ˆ ï¼ˆé›»è…¦éœ€è¦è‡³å°‘ 20GB ä»¥ä¸Šç¡¬ç¢Ÿç©ºé–“, é ä¼°ä¸‹è¼‰æ™‚é–“ï¼š 7 åˆ†é˜ï¼‰</a></li>
<li class="chapter" data-level="3.3.3" data-path="prerequisite-.html"><a href="prerequisite-.html#ä¸‹è¼‰åŠå®‰è£-vmware-workstation-player-é ä¼°ä¸‹è¼‰æ™‚é–“-1-åˆ†é˜-æ“ä½œæ™‚é–“10-åˆ†é˜"><i class="fa fa-check"></i><b>3.3.3</b> 2. ä¸‹è¼‰åŠå®‰è£ VMWare Workstation Player (é ä¼°ä¸‹è¼‰æ™‚é–“ï¼š &lt; 1 åˆ†é˜ / æ“ä½œæ™‚é–“ï¼š10 åˆ†é˜)</a></li>
<li class="chapter" data-level="3.3.4" data-path="prerequisite-.html"><a href="prerequisite-.html#å®‰è£å¥—ä»¶ä¹‹æº–å‚™å·¥ä½œ-ä»¥ä¸‹æ­¥é©Ÿ-3---7-ç´„éœ€æ™‚-30-åˆ†é˜"><i class="fa fa-check"></i><b>3.3.4</b> 3. å®‰è£å¥—ä»¶ä¹‹æº–å‚™å·¥ä½œ (ä»¥ä¸‹æ­¥é©Ÿ 3 - 7 ç´„éœ€æ™‚ 30 åˆ†é˜ )</a></li>
<li class="chapter" data-level="3.3.5" data-path="prerequisite-.html"><a href="prerequisite-.html#å®‰è£-arm-mbed-os-command-line-ç·¨è­¯ç¨‹å¼-mbed-cli"><i class="fa fa-check"></i><b>3.3.5</b> 4. å®‰è£ ARM mbed-os command line ç·¨è­¯ç¨‹å¼ mbed-cli</a></li>
<li class="chapter" data-level="3.3.6" data-path="prerequisite-.html"><a href="prerequisite-.html#å®‰è£-arm-gcc-compiler-ç·¨è­¯å™¨"><i class="fa fa-check"></i><b>3.3.6</b> 5. å®‰è£ ARM GCC compiler (ç·¨è­¯å™¨)</a></li>
<li class="chapter" data-level="3.3.7" data-path="prerequisite-.html"><a href="prerequisite-.html#ä¸‹è¼‰-tensorflow-lite-for-microcontroller-tflm"><i class="fa fa-check"></i><b>3.3.7</b> 6. ä¸‹è¼‰ TensorFlow Lite for Microcontroller (TFLM)</a></li>
<li class="chapter" data-level="3.3.8" data-path="prerequisite-.html"><a href="prerequisite-.html#ä¸‹è¼‰-stm32-f-ç³»åˆ—å·¥å…·ç®±"><i class="fa fa-check"></i><b>3.3.8</b> 7. ä¸‹è¼‰ STM32-F ç³»åˆ—å·¥å…·ç®±</a></li>
<li class="chapter" data-level="3.3.9" data-path="prerequisite-.html"><a href="prerequisite-.html#é–‹å§‹åŸ·è¡Œ-tensorflow-lite-for-microcontroller-ç¨‹å¼"><i class="fa fa-check"></i><b>3.3.9</b> 8. é–‹å§‹åŸ·è¡Œ TensorFlow Lite for Microcontroller ç¨‹å¼</a></li>
<li class="chapter" data-level="3.3.10" data-path="prerequisite-.html"><a href="prerequisite-.html#åƒè€ƒæ–‡ä»¶"><i class="fa fa-check"></i><b>3.3.10</b> åƒè€ƒæ–‡ä»¶</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="prerequisite-.html"><a href="prerequisite-.html#arduinoide"><i class="fa fa-check"></i><b>3.4</b> Arduino IDE å®‰è£ - æ–¹æ³•ä¸€: å¾ Arduino libraries å®‰è£ TensorFlowLite</a></li>
<li class="chapter" data-level="3.5" data-path="prerequisite-.html"><a href="prerequisite-.html#arduino-ide-å®‰è£---æ–¹æ³•äºŒ-å¾-makefile-å®‰è£-tensorflowlite"><i class="fa fa-check"></i><b>3.5</b> Arduino IDE å®‰è£ - æ–¹æ³•äºŒ: å¾ Makefile å®‰è£ TensorFlowLite</a></li>
<li class="chapter" data-level="3.6" data-path="prerequisite-.html"><a href="prerequisite-.html#esp-arduino"><i class="fa fa-check"></i><b>3.6</b> ESP32-CAM å®‰è£ Arduino é–‹ç™¼ç’°å¢ƒ</a></li>
<li class="chapter" data-level="3.7" data-path="prerequisite-.html"><a href="prerequisite-.html#esp-idf"><i class="fa fa-check"></i><b>3.7</b> ESP32-CAM å®‰è£ esp-idf é–‹ç™¼ç’°å¢ƒ</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="prerequisite-.html"><a href="prerequisite-.html#esp32-cam-ç¡¬é«”ç°¡ä»‹"><i class="fa fa-check"></i><b>3.7.1</b> ESP32-CAM ç¡¬é«”ç°¡ä»‹</a></li>
<li class="chapter" data-level="3.7.2" data-path="prerequisite-.html"><a href="prerequisite-.html#esp-idf-å®‰è£ç’°å¢ƒè¨­å®š"><i class="fa fa-check"></i><b>3.7.2</b> esp-idf å®‰è£ç’°å¢ƒè¨­å®š</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chap-hello-world-training.html"><a href="chap-hello-world-training.html"><i class="fa fa-check"></i><b>4</b> Hello_world ç¯„ä¾‹ç¨‹å¼ - è¨“ç·´</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chap-hello-world-training.html"><a href="chap-hello-world-training.html#åœ¨-google-colab-ä¸Šå»ºç«‹åŠè¨“ç·´-hello_world-çš„æ¨¡å‹"><i class="fa fa-check"></i><b>4.1</b> åœ¨ Google colab ä¸Šå»ºç«‹åŠè¨“ç·´ hello_world çš„æ¨¡å‹</a></li>
<li class="chapter" data-level="4.2" data-path="chap-hello-world-training.html"><a href="chap-hello-world-training.html#colab-åŸ·è¡Œ-training-ç¨‹å¼å‰çš„æº–å‚™å·¥ä½œ"><i class="fa fa-check"></i><b>4.2</b> colab åŸ·è¡Œ training ç¨‹å¼å‰çš„æº–å‚™å·¥ä½œ</a></li>
<li class="chapter" data-level="4.3" data-path="chap-hello-world-training.html"><a href="chap-hello-world-training.html#colab-åŸ·è¡Œ-train-hello_world-model.ipynb-ç¨‹å¼"><i class="fa fa-check"></i><b>4.3</b> colab åŸ·è¡Œ train hello_world model.ipynb ç¨‹å¼</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="chap-hello-world-training.html"><a href="chap-hello-world-training.html#è¨“ç·´éç¨‹ä¸­-å­¸ç¿’å¦‚ä½•ä¿®æ­£åŠæ”¹å–„æ¨¡å‹-ä¸¦å°‡æ¨¡å‹è½‰æ›æˆ-tflm-æ¥å—çš„æ ¼å¼"><i class="fa fa-check"></i><b>4.3.1</b> è¨“ç·´éç¨‹ä¸­, å­¸ç¿’å¦‚ä½•ä¿®æ­£åŠæ”¹å–„æ¨¡å‹, ä¸¦å°‡æ¨¡å‹è½‰æ›æˆ TFLM æ¥å—çš„æ ¼å¼</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html"><i class="fa fa-check"></i><b>5</b> Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«–</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#disco-f746ng-hello-world"><i class="fa fa-check"></i><b>5.1</b> åœ¨ STM32 DISCO_F746NG ä¸Šå¯¦ç¾ hello_world</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#ç„¡ç—›åŸ·è¡Œåœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼-ä¸¦ä¸‹è¼‰è‡³-stm32-disco_f746ng"><i class="fa fa-check"></i><b>5.1.1</b> (ç„¡ç—›åŸ·è¡Œ)åœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼, ä¸¦ä¸‹è¼‰è‡³ STM32 DISCO_F746NG</a></li>
<li class="chapter" data-level="5.1.2" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#å¾®ç—›åŸ·è¡Œåœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼-ä¸¦ä¸‹è¼‰è‡³-stm32-disco_f746ng"><i class="fa fa-check"></i><b>5.1.2</b> (å¾®ç—›åŸ·è¡Œ)åœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼, ä¸¦ä¸‹è¼‰è‡³ STM32 DISCO_F746NG</a></li>
<li class="chapter" data-level="5.1.3" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#ç—›è‹¦çš„-debugéç¨‹-disco_f746ng-åŸ·è¡Œ-hello_world-ç•¶æ©Ÿ"><i class="fa fa-check"></i><b>5.1.3</b> (ç—›è‹¦çš„ debugéç¨‹) DISCO_F746NG åŸ·è¡Œ hello_world ç•¶æ©Ÿ</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#arduino-nano33-hello-world"><i class="fa fa-check"></i><b>5.2</b> åœ¨ Arduino Nano 33 BLE ä¸Šå¯¦ç¾ hello_world</a></li>
<li class="chapter" data-level="5.3" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#esp32-cam-hello-world"><i class="fa fa-check"></i><b>5.3</b> åœ¨ ESP32-CAM ä¸Šå¯¦ç¾ hello_world</a></li>
<li class="chapter" data-level="5.4" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#riscv-amigo-hello-world"><i class="fa fa-check"></i><b>5.4</b> åœ¨ MaixPy Amigo (RISC-V CPU) ä¸Šå¯¦ç¾ hello_world</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#å»ºç«‹-maixpy-tool-chains"><i class="fa fa-check"></i><b>5.4.1</b> å»ºç«‹ MaixPy tool chains</a></li>
<li class="chapter" data-level="5.4.2" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#ä¸‹è¼‰-tensorflow-lite-micro-åŸ·è¡Œ-make-ä¾†ç”¢ç”Ÿ-source-code"><i class="fa fa-check"></i><b>5.4.2</b> ä¸‹è¼‰ TensorFlow lite micro, åŸ·è¡Œ make ä¾†ç”¢ç”Ÿ source code</a></li>
<li class="chapter" data-level="5.4.3" data-path="chap-hello-world-inference.html"><a href="chap-hello-world-inference.html#å°‡-tensforflow-çš„-source-code-æª”æ¡ˆæ•´ç†æˆ-maixipy-tool-chain-çš„æª”æ¡ˆæ¶æ§‹"><i class="fa fa-check"></i><b>5.4.3</b> å°‡ tensforflow çš„ source code æª”æ¡ˆæ•´ç†æˆ MaixiPy tool chain çš„æª”æ¡ˆæ¶æ§‹</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-micro-speech-inference.html"><a href="chap-micro-speech-inference.html"><i class="fa fa-check"></i><b>6</b> Micro_speech ç¯„ä¾‹ç¨‹å¼-å–šé†’è©åµæ¸¬ï¼šå»ºæ§‹ app</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chap-micro-speech-inference.html"><a href="chap-micro-speech-inference.html#disco-f746ng-micro-speech"><i class="fa fa-check"></i><b>6.1</b> åœ¨ STM32 DISCO_F746NG ä¸Šå¯¦ç¾ micro_speech</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="chap-micro-speech-inference.html"><a href="chap-micro-speech-inference.html#ç„¡ç—›åŸ·è¡Œåœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼-ä¸¦ä¸‹è¼‰è‡³-stm32-disco_f746ng-1"><i class="fa fa-check"></i><b>6.1.1</b> (ç„¡ç—›åŸ·è¡Œ)åœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼, ä¸¦ä¸‹è¼‰è‡³ STM32 DISCO_F746NG</a></li>
<li class="chapter" data-level="6.1.2" data-path="chap-micro-speech-inference.html"><a href="chap-micro-speech-inference.html#å¾®ç—›åŸ·è¡Œåœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼-ä¸¦ä¸‹è¼‰è‡³-stm32-disco_f746ng-1"><i class="fa fa-check"></i><b>6.1.2</b> (å¾®ç—›åŸ·è¡Œ)åœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼, ä¸¦ä¸‹è¼‰è‡³ STM32 DISCO_F746NG</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="chap-micro-speech-inference.html"><a href="chap-micro-speech-inference.html#disco-nano33-micro-speech"><i class="fa fa-check"></i><b>6.2</b> åœ¨ Arduino Nano 33 BLE ä¸Šå¯¦ç¾ micro_speech</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html"><i class="fa fa-check"></i><b>7</b> Micro_speech ç¯„ä¾‹ç¨‹å¼-å–šé†’è©åµæ¸¬ï¼šè¨“ç·´æ¨¡å‹</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#åœ¨-google-colab-ä¸Šå»ºç«‹åŠè¨“ç·´-micro_speech-çš„æ¨¡å‹-åŸå§‹ç¨‹å¼åŠè¨­å®š"><i class="fa fa-check"></i><b>7.1</b> åœ¨ Google colab ä¸Šå»ºç«‹åŠè¨“ç·´ micro_speech çš„æ¨¡å‹ (åŸå§‹ç¨‹å¼åŠè¨­å®š)</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#colab-åŸ·è¡Œ-training-ç¨‹å¼å‰çš„æº–å‚™å·¥ä½œ-1"><i class="fa fa-check"></i><b>7.1.1</b> colab åŸ·è¡Œ training ç¨‹å¼å‰çš„æº–å‚™å·¥ä½œ</a></li>
<li class="chapter" data-level="7.1.2" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#colab-åŸ·è¡Œ-train-micro_speech-model.ipynb-ç¨‹å¼"><i class="fa fa-check"></i><b>7.1.2</b> colab åŸ·è¡Œ train micro_speech model.ipynb ç¨‹å¼</a></li>
<li class="chapter" data-level="7.1.3" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#å°‡æ¨¡å‹ä¸Šå‚³è‡³é–‹ç™¼æ¿"><i class="fa fa-check"></i><b>7.1.3</b> å°‡æ¨¡å‹ä¸Šå‚³è‡³é–‹ç™¼æ¿</a></li>
<li class="chapter" data-level="7.1.4" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#æ¥çºŒåŸ·è¡Œ-make-åŠç¨‹å¼ä¸Šå‚³"><i class="fa fa-check"></i><b>7.1.4</b> æ¥çºŒåŸ·è¡Œ make åŠç¨‹å¼ä¸Šå‚³</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#colab-micro-speech-customization"><i class="fa fa-check"></i><b>7.2</b> åœ¨ Google colab ä¸Šå»ºç«‹åŠè¨“ç·´å®¢è£½åŒ– micro_speech çš„æ¨¡å‹</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#ä¿®æ”¹-colab-è¨“ç·´ç¨‹å¼"><i class="fa fa-check"></i><b>7.2.1</b> ä¿®æ”¹ colab è¨“ç·´ç¨‹å¼</a></li>
<li class="chapter" data-level="7.2.2" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#æ›´æ›æ¨¡å‹---å°‡-colab-è¨“ç·´çµæœçš„-g_model-å…§å®¹è¤‡è£½è²¼ä¸Šåˆ°-model.cc-1"><i class="fa fa-check"></i><b>7.2.2</b> æ›´æ›æ¨¡å‹ - å°‡ colab è¨“ç·´çµæœçš„ g_model[ ] å…§å®¹è¤‡è£½è²¼ä¸Šåˆ° model.cc</a></li>
<li class="chapter" data-level="7.2.3" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#ä¿®æ”¹-micro_model_settings.cc"><i class="fa fa-check"></i><b>7.2.3</b> ä¿®æ”¹ micro_model_settings.cc</a></li>
<li class="chapter" data-level="7.2.4" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#ä¿®æ”¹-command_responder.cc"><i class="fa fa-check"></i><b>7.2.4</b> ä¿®æ”¹ command_responder.cc</a></li>
<li class="chapter" data-level="7.2.5" data-path="chap-micro-speech-training.html"><a href="chap-micro-speech-training.html#æ¥çºŒåŸ·è¡Œ-make-åŠç¨‹å¼ä¸Šå‚³-1"><i class="fa fa-check"></i><b>7.2.5</b> æ¥çºŒåŸ·è¡Œ make åŠç¨‹å¼ä¸Šå‚³</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="8" data-path="chap-magic-wand.html"><a href="chap-magic-wand.html"><i class="fa fa-check"></i><b>8</b> Magic_wand ç¯„ä¾‹ç¨‹å¼</a></li>
<li class="chapter" data-level="9" data-path="chap-person-detection.html"><a href="chap-person-detection.html"><i class="fa fa-check"></i><b>9</b> Person_detection ç¯„ä¾‹ç¨‹å¼</a>
<ul>
<li class="chapter" data-level="9.1" data-path="chap-person-detection.html"><a href="chap-person-detection.html#esp32-cam-æ–¼-esp-idf-é–‹ç™¼ç’°å¢ƒ"><i class="fa fa-check"></i><b>9.1</b> ESP32-CAM æ–¼ esp-idf é–‹ç™¼ç’°å¢ƒ</a></li>
<li class="chapter" data-level="9.2" data-path="chap-person-detection.html"><a href="chap-person-detection.html#esp32-cam-æ–¼-arduino-é–‹ç™¼ç’°å¢ƒ"><i class="fa fa-check"></i><b>9.2</b> ESP32-CAM æ–¼ Arduino é–‹ç™¼ç’°å¢ƒ</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-.html"><a href="references-.html"><i class="fa fa-check"></i>References åƒè€ƒæ–‡ç»</a></li>
<li class="appendix"><span><b>é™„éŒ„</b></span></li>
<li class="chapter" data-level="A" data-path="appendixa.html"><a href="appendixa.html"><i class="fa fa-check"></i><b>A</b> Appendix A - é–‹ç™¼æ¿é‹ç®—èƒ½åŠ›åˆ†æ</a></li>
<li class="chapter" data-level="B" data-path="appendixb.html"><a href="appendixb.html"><i class="fa fa-check"></i><b>B</b> Appendix B - Hello_world åŸå§‹ç¢¼åˆ†æ</a></li>
<li class="chapter" data-level="C" data-path="appendixc.html"><a href="appendixc.html"><i class="fa fa-check"></i><b>C</b> Appendix C - æ©Ÿå™¨å­¸ç¿’æ¨¡å‹ä¹‹åŠ å¼·åŠæ”¹å–„å¯èƒ½</a></li>
<li class="chapter" data-level="D" data-path="appendixd.html"><a href="appendixd.html"><i class="fa fa-check"></i><b>D</b> Appendix D - éŸ³é »è²è­œçš„èªªæ˜èˆ‡æ¨¡å‹åˆ†æ</a></li>
<li class="divider"></li>
<li><a href="https://github.com/marconi1964" target="blank">Marconi github</a></li>
<li><a href="mailto:marconi1964@yahoo.com">marconi1964@yahoo.com or</a></li>
<li><a href="mailto:marconi.jiang@gmail.com">marconi.jiang@gmail.com</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">TensorFlow Lite for Microcontroller (TFLM)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chap-hello-world-inference" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Hello_world ç¯„ä¾‹ç¨‹å¼ - æ¨è«–</h1>
<p>æœ¬ç« ç¯€å°æ‡‰åˆ° <a href="https://www.books.com.tw/products/0010865580">TinyML TensorFLow Lite æ©Ÿå™¨å­¸ç¿’ä¸­æ–‡ç‰ˆ</a> çš„ç¬¬å…­ç« . (åŸæ›¸ç¬¬äº”ç« æ˜¯èªªæ˜ hello_world åŸå§‹ç¨‹å¼åŠæ¸¬è©¦ç¢¼, å¯ä»¥ç•¶ä½œå¾ŒçºŒçš„ç ”ç©¶åˆ†æ, åˆ—å…¥ Â§é™„éŒ„ <a href="appendixb.html#appendixb">B</a> çš„ä¸»é¡Œ)</p>
<p>ä¸Šä¸€ç« , æˆ‘å€‘å·²ç¶“å»ºç«‹äº†å¯ä»¥è½‰ç§»åˆ°é–‹ç™¼æ¿ä¸ŠåŸ·è¡Œçš„æ¨¡å‹, æ¨¡å‹åªæ˜¯æ©Ÿå™¨å­¸ç¿’æ‡‰ç”¨ app çš„ä¸€éƒ¨åˆ†è€Œå·², TFLM æä¾›ä¸åŒé–‹ç™¼æ¿çš„ hello_world app, éœ€è¦åœ¨ç­†é›»ä¸Šå°‡æ¨¡å‹åŠ å…¥åŸå§‹ç¨‹å¼, é‡æ–°ç·¨è­¯æˆä¸åŒé–‹ç™¼æ¿å¯ä»¥åŸ·è¡Œçš„ç¨‹å¼ç¢¼(ä¸åŒ CPU çš„ç¨‹å¼ç¢¼ç„¡æ³•è·¨å¹³å°åŸ·è¡Œ), ä¹Ÿå¯ä»¥åœ¨ PC æˆ– Mac ä¸Šæ¨¡æ“¬çµæœ.</p>
<p>æœ¬æ–‡ä»‹ç´¹å¯ä»¥é‹ä½œ hello_world ç¤ºç¯„ç¨‹å¼çš„æœ‰ä»¥ä¸‹çš„å‰å…©ç¨® (ç¶²è·¯ä¸Šæœ‰æ›´æ–°, å¯ä»¥æ”¯æ´æ›´å¤šè¨­å‚™):</p>
<ul>
<li><a href="chap-hello-world-inference.html#arduino-nano33-hello-world">Arduino Nano 33 BLE Sense</a><br />
</li>
<li><a href="chap-hello-world-inference.html#disco-f746ng-hello-world">ST Microelectronics STM32F746NG Discovery kit</a><br />
</li>
<li>SparkFun Edge (<a href="https://www.books.com.tw/products/0010865580">TinyML TensorFLow Lite æ©Ÿå™¨å­¸ç¿’ä¸­æ–‡ç‰ˆ</a> æ›¸ä¸Šæœ‰ä»‹ç´¹, ä½†æ‰‹ä¸Šæ²’æœ‰é€™å¡Šé–‹ç™¼æ¿, å°±ä¸ä»‹ç´¹äº†)<br />
</li>
<li>2021/4/6 æ–°å¢å¯¦é©— <a href="chap-hello-world-inference.html#esp32-cam-hello-world">ESP32-CAM</a></li>
<li>2021/4/27 æ–°å¢å¯¦é©— <a href="chap-hello-world-inference.html#riscv-amigo-hello-world">MaixPy Amigo (RISC-V CPU)</a></li>
</ul>
<p><a id="disco_f746ng_hello_world"></a></p>
<div id="disco-f746ng-hello-world" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> åœ¨ STM32 DISCO_F746NG ä¸Šå¯¦ç¾ hello_world</h2>
<div id="ç„¡ç—›åŸ·è¡Œåœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼-ä¸¦ä¸‹è¼‰è‡³-stm32-disco_f746ng" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> (ç„¡ç—›åŸ·è¡Œ)åœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼, ä¸¦ä¸‹è¼‰è‡³ STM32 DISCO_F746NG</h3>
<p>å› ç‚º TensorFlow Lite Micro çš„é–‹ç™¼æŒçºŒåœ¨é€²è¡Œ, éƒ¨ä»½æ–‡ä»¶ä¸¦æ²’æœ‰éš¨è‘—é–‹ç™¼é€²åº¦è€Œæ›´æ–°, å¦‚æœç…§è‘— github ä¸ŠåŸ·è¡Œæœƒç”¢ç”Ÿä¸€äº›éŒ¯èª¤, è€Œä¸”, åœ¨ç·¨è­¯ (make) ä¹‹å‰, éœ€è¦å°‡ STM32 DISCO_F746NG ç›¸é—œæª”æ¡ˆè¤‡è£½åˆ°ä¸»ç¨‹å¼ç›®éŒ„ä¸‹, å› æ­¤, æˆ‘åœ¨ github å‰µå»ºäº†ä¸€å€‹ branch, é‡å° DISCO_F746NG çš„é–‹ç™¼æ¿åšäº†æª”æ¡ˆå®‰æ’åŠè¨­å®šèª¿æ•´, å¯ä»¥ç›´æ¥ç·¨è­¯, ä¸¦ä¸‹è¼‰åˆ° DISCO_F746NG é–‹ç™¼æ¿ä¸ŠåŸ·è¡Œ.</p>
<p>åƒè€ƒ<a href="https://github.com/marconi1964/tensorflow/blob/example/tensorflow/lite/micro/examples/hello_world/disco_f746ng/README_disco_f746ng.md">æˆ‘çš„ TFLM github - hello_world</a>ç„¡ç—›åŸ·è¡Œ</p>
<p>åœ¨ä¸‹ä¸€ç¯€èªªæ˜å¦‚æœå¾ TFLM github å®˜ç¶²ä¸‹è¼‰å…§å®¹æ™‚, éœ€è¦åšçš„ä¿®æ”¹.</p>
</div>
<div id="å¾®ç—›åŸ·è¡Œåœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼-ä¸¦ä¸‹è¼‰è‡³-stm32-disco_f746ng" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> (å¾®ç—›åŸ·è¡Œ)åœ¨ç­†é›»ä¸Šç·¨è­¯ç¨‹å¼, ä¸¦ä¸‹è¼‰è‡³ STM32 DISCO_F746NG</h3>
<p>æ­¤ç¯€ä¹ƒé‡å°å·²ç¶“ç†Ÿæ‚‰ä¸Šä¸€ç¯€çš„å…§å®¹, é †åˆ©åŸ·è¡Œå¾Œ, é€²ä¸€æ­¥å¾ TFLM github å®˜ç¶²ä¸‹è¼‰, å¾—è‡ªè¡Œä¿®æ”¹éƒ¨ä»½å…§å®¹æ–¹èƒ½é †åˆ©åŸ·è¡Œç„¡èª¤.</p>
<p><strong>å‹•æ‰‹ä¿®æ”¹å…§å®¹</strong></p>
<p>éœ€è¦ä¿®æ”¹çš„å…§å®¹æœ‰<br />
1. æ”¹å¾ <a href="https://github.com/tensorflow" class="uri">https://github.com/tensorflow</a> å®˜ç¶²ä¸‹è¼‰<br />
2. å°‡ tensorflow/lite/micro/examples/hello_world/disco_f746ng/ é€™ç›®éŒ„æ”¹åæˆç‚º tensorflow/lite/micro/examples/hello_world/mbed/<br />
å…¶é¤˜å¾ make ä»¥å¾Œçš„æ“ä½œç¶­æŒè·ŸåŸå…ˆå…§å®¹ä¸è®Š</p>
<div id="æ”¹å¾-httpsgithub.comtensorflow-å®˜ç¶²ä¸‹è¼‰" class="section level4" number="5.1.2.1">
<h4><span class="header-section-number">5.1.2.1</span> æ”¹å¾ <a href="https://github.com/tensorflow" class="uri">https://github.com/tensorflow</a> å®˜ç¶²ä¸‹è¼‰</h4>
<pre><code># å¾æˆ‘çš„ github
$ git clone -b example --depth 1 https://github.com/marconi1964/tensorflow.git
# æ”¹åˆ°ç”¨ Tensorflow å®˜ç¶²çš„ github
$ git clone --depth 1 https://github.com/marconi1964/tensorflow.git
# æˆ–æ˜¯
$ git clone --depth 1 https://github.com/tensorflow/tensorflow.git
$ cd tensorflow</code></pre>
</div>
<div id="å°‡-tensorflowlitemicroexampleshello_worlddisco_f746ng-é€™ç›®éŒ„æ”¹åæˆç‚º-tensorflowlitemicroexampleshello_worldmbed" class="section level4" number="5.1.2.2">
<h4><span class="header-section-number">5.1.2.2</span> å°‡ tensorflow/lite/micro/examples/hello_world/disco_f746ng/ é€™ç›®éŒ„æ”¹åæˆç‚º tensorflow/lite/micro/examples/hello_world/mbed/</h4>
<p>DISCO_F746NG çš„é©…å‹•ç¨‹å¼ (constant.cc èˆ‡ output_handler.cc) è·Ÿæ¨™æº–çš„ç¤ºç¯„ç¨‹å¼ä¸åŒ, éœ€è¦è®“ make æŠŠ F746NG çš„é©…å‹•ç¨‹å¼åŒ…å«åœ¨ä¸»ç¨‹å¼æ‰èƒ½åœ¨é–‹ç™¼æ¿ä¸ŠåŸ·è¡Œ, é€™éƒ¨åˆ†å·²ç¶“åœ¨ Makefile å®Œæˆ, åªæ˜¯ç›®å‰ Makefile çš„å¯«æ³•æ˜¯æ“·å– TARGET=mbed ä¸­çš„ â€˜mbed,â€™ å†åˆ° hello_world ç›®éŒ„ä¸‹å°‹æ‰¾ â€˜mbedâ€™ å­ç›®éŒ„ (é€™éƒ¨åˆ†çš„ç¨‹å¼è¨­å®šæœ‰å•é¡Œ, å·²ç¶“åœ¨ TensorFlow github ä¸Šç™¼ issue), è€Œ mbed å­ç›®éŒ„æ˜¯ä¸å­˜åœ¨, ä¸” Makefile ä¸æœƒå»å°‹æ‰¾ disco_f746ng å­ç›®éŒ„.</p>
<pre><code># æ¥çºŒä¸Šä¸€å€‹å‹•ä½œ, å·²ç¶“åœ¨ tensorflow ç›®éŒ„ä¸‹, åˆ‡æ›åˆ° hello_world ç¤ºç¯„ç¨‹å¼ç›®éŒ„
$ cd tensorflow/lite/micro/examples/hello_world/

$ mv disco_f746ng mbed
# å®Œæˆå¾Œ, å›åˆ° tensorflow ä¸»ç›®éŒ„ä¸‹
$ cd ~/tensorflow</code></pre>
<p>(ä»¥ä¸Šçš„å‹•ä½œ, çœ‹èµ·ä¾†å¾ˆç°¡å–®, å»æ˜¯æˆ‘èŠ±æœ€å¤šæ™‚é–“çš„åœ°æ–¹, éœ€è¦å»äº†è§£ Makefile åŠå±¤å±¤ç–ŠåŠ ä¸Šçš„ Makefile.inc å’Œ *_makefile.inc çš„è¤‡é›œæ¶æ§‹.)</p>
<p>ç¹¼çºŒåŸ·è¡Œ make ä»¥åŠå¾ŒçºŒçš„å‹•ä½œ</p>
<pre><code>$ make -f tensorflow/lite/micro/tools/make/Makefile TARGET=mbed ALL_TAGS=disco_f746ng generate_hello_world_mbed_project
$ cd tensorflow/lite/micro/tools/make/gen/mbed_cortex-m4_default/prj/hello_world/mbed
$ mbed config root .
$ mbed deploy
$ mbed compile -m DISCO_F746NG -t GCC_ARM</code></pre>
</div>
<div id="å°‡-make-å¾Œçš„-mbed.bin-ä¸Šå‚³åˆ°-disco_f746ng-é–‹ç™¼æ¿" class="section level4" number="5.1.2.3">
<h4><span class="header-section-number">5.1.2.3</span> å°‡ make å¾Œçš„ mbed.bin ä¸Šå‚³åˆ° DISCO_F746NG é–‹ç™¼æ¿</h4>
</div>
</div>
<div id="ç—›è‹¦çš„-debugéç¨‹-disco_f746ng-åŸ·è¡Œ-hello_world-ç•¶æ©Ÿ" class="section level3" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> (ç—›è‹¦çš„ debugéç¨‹) DISCO_F746NG åŸ·è¡Œ hello_world ç•¶æ©Ÿ</h3>
<p>ç¬¬ä¸€æ¬¡åŸ·è¡Œæ™‚, é‚„ä¾†ä¸åŠæ²’æœ‰æ‰“é–‹ screen æ¥æ”¶ debug è¨Šæ¯, å°±ä¸€é¡†çƒåœ¨ä¸Šæ–¹å®šä½, æ‡·ç–‘æˆ‘çš„æ“ä½œ/æ“å®ˆæœ‰å•é¡Œâ€¦ æ‰“é–‹ screen, å‡ºç¾ ** Error message **</p>
<pre><code>x_value: 1.0*2^-127, y_value: 1.0*2^-127

x_value: 1.4361557*2^-4, y_value: 1.7621826*2^-4

x_value: 1.4361557*2^-3, y_value: 1.8977352*2^-3

x_value: 1.0771168*2^-2, y_value: 1.389413*2^-2

x_value: 1.4361557*2^-2, y_value: 1.5588537*2^-2

x_value: 1.7951952*2^-2, y_value: 1.7960706*2^-2

x_value: 1.0771168*2^-1, y_value: 1.965511*2^-2

x_value: 1.2566366*2^-1, y_value: 1.1183078*2^-1

x_value: 1.4361557*2^-1, y_value: 1.3724688*2^-1

x_value: 1.6156756*2^-1, y_value: 1.4910772*2^-1

x_value: 1.7951952*2^-1, y_value: 1.6605182*2^-1

x_value: 1.9747147*2^-1, y_value: 1.7791265*2^-1

x_value: 1.0771168*2^0, y_value: 1.7791265*2^-1

x_value: 1.1668766*2^0, y_value: 1.8977352*2^-1

x_value: 1.2566366*2^0, y_value: 1.9316229*2^-1

x_value: 1.3463962*2^0, y_value: 1.965511*2^-1

x_value: 1.4361557*2^0, y_value: 1.0166438*2^0

++ MbedOS Fault Handler ++

FaultType: HardFault

Context:
R0: 7C
R1: 8
R2: FFDB4437
R3: 1
R4: 20002D58
R5: 34
R6: A
R7: FFDB4437
R8: 0
R9: 72
R10: 8
R11: 68
R12: 34
SP   : 2004FF8C
LR   : 800051B
PC   : 8000472
xPSR : 1000200
PSP  : 0
MSP  : 2004FF20
CPUID: 410FC271
HFSR : 40000000
MMFSR: 0
BFSR : 4
UFSR : 0
DFSR : 9
AFSR : 0
Mode : Thread
Priv : Privileged
Stack: MSP

-- MbedOS Fault Handler --



++ MbedOS Error Info ++
Error Status: 0x80FF013D Code: 317 Module: 255
Error Message: Fault exception
Location: 0x8000472
Error Value: 0x20002E34
For more info, visit: https://mbed.com/s/error?error=0x80FF013D&amp;tgt=DISCO_F746NG
-- MbedOS Error Info --
</code></pre>
<p>æŸ¥çœ‹ <a href="https://mbed.com/s/error?error=0x80FF013D&amp;tgt=DISCO_F746NG" class="uri">https://mbed.com/s/error?error=0x80FF013D&amp;tgt=DISCO_F746NG</a> è¼¸å…¥éŒ¯èª¤ç¢¼ (error code) 0x80FF013D å¾Œæœƒç”¢ç”Ÿä»¥ä¸‹è¨Šæ¯</p>
<pre><code>
Error Decoder
0x80FF013D
Type:
System
Module
Unknown module
Error Code
HardFault exception
Cortex-M HardFault exception has occurred. Please see https://os.mbed.com/docs/latest/tutorials/analyzing-mbed-os-crash-dump.html for more info.
</code></pre>
<p>é€²ä¸€æ­¥æŸ¥çœ‹ <a href="https://os.mbed.com/docs/latest/tutorials/analyzing-mbed-os-crash-dump.html" class="uri">https://os.mbed.com/docs/latest/tutorials/analyzing-mbed-os-crash-dump.html</a></p>
<pre><code>The following Cortex-M fault exceptions trigger the Mbed OS fault exception handler.

    MemManage Exception - Memory accesses that violate the setup in the MPU and certain illegal memory accesses trigger memory management faults.
    BusFault Exception - When an error response is received during a transfer on the AHB interfaces, it produces bus faults.
    UsageFault Exception - Division by zero, unaligned accesses and trying to execute coprocessor instructions can cause usage faults.
    HardFault Exception - Triggered on all fault conditions or if the corresponding fault handler (one of the above) is not enabled.
</code></pre>
<p>çŒœå¯èƒ½æ˜¯è¨˜æ†¶é«”å•é¡Œ, å†çœ‹ä¸€ä¸‹è¢å¹•ç•¶æ©Ÿæ™‚, çƒæ˜¯åœ¨è¢å¹•çš„æœ€ä¸Šæ–¹, æ˜¯å¦æ˜¯è¶…éè¢å¹•çš„ç¯„åœè€Œé€ æˆéŒ¯èª¤, çœ‹ä¸€ä¸‹åŸå§‹æª”æ¡ˆ output_handler.cc è·Ÿ error message å¯èƒ½æ˜¯æœ‰è¡çªçš„.</p>
<pre><code># error message
x_value: 1.4361557*2^0, y_value: 1.0166438*2^0

# output_handler.cc
    y_pos = dot_radius + static_cast&lt;int&gt;(midpoint * (1.f - y_value));     # åŸå§‹ç¨‹å¼æœƒæœ‰å•é¡Œ

    y_pos = dot_radius + static_cast&lt;int&gt;(midpoint * (1.1f - y_value));    # å°èª¿æ•´å¾Œå³å¯æ­£å¸¸é‹ä½œ
</code></pre>
<p><a id="arduino_nano33_hello_world"></a></p>
</div>
</div>
<div id="arduino-nano33-hello-world" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> åœ¨ Arduino Nano 33 BLE ä¸Šå¯¦ç¾ hello_world</h2>
<p>åœ¨ Â§<a href="prerequisite-.html#arduinoide">3.4</a> Arduino IDE å®‰è£å¾Œ, å°‡ Arduino Nano 33 BLE æ¥ä¸Šé›»è…¦çš„ USB, é€²å…¥ Arduino IDE çš„ Tools - Boards åŠ Port ç¢ºå®šå·²ç¶“å®‰è£å®Œæˆ, å†åˆ° File - Examples æ‰¾åˆ° Arduino_TensorFlowLite ä¸‹æœƒæœ‰ 4 å€‹ç¯„ä¾‹</p>
<ul>
<li>hello_world<br />
</li>
<li>magic_wand<br />
</li>
<li>micro_speech<br />
</li>
<li>person_detection</li>
</ul>
<p>é¸æ“‡æˆ‘å€‘æƒ³è¦çš„ç¯„ä¾‹ hello_world åŸ·è¡Œå³å¯.</p>
<p>åŸ·è¡Œä¸­, å¯ä»¥æ‰“é–‹ Arduino IDE menu<br />
* Tool - Serial Monitor : çœ‹åˆ° Nano 33 å›é¥‹çš„é æ¸¬ Xã€Y å€¼
* Tool - Serial Plotter : çœ‹åˆ° Nano 33 å›é¥‹çš„é æ¸¬ Xã€Y å€¼å±•é–‹çš„åœ–å½¢</p>
<p>åŒæ™‚, Nano 33 çš„ç‡ˆè™Ÿä¹Ÿæœƒéš¨è‘—è¾¨è­˜çµæœ, é€æ¼¸è®Šäº®åˆ°ç†„æ»…å†è®Šäº®</p>
</div>
<div id="esp32-cam-hello-world" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> åœ¨ ESP32-CAM ä¸Šå¯¦ç¾ hello_world</h2>
<p>é€™è£¡ä¸èªªæ˜ Arduino çš„ä½œæ³•(ä½œæ³•æ›´ Arduino Nano 33 å¤§åŒå°ç•°), åƒ…å°± esp-idf æ–¹æ³•åšèªªæ˜</p>
<p>åœ¨ Â§<a href="prerequisite-.html#esp-idf">3.7</a> esp-idf å®‰è£ä¸”æ¸¬è©¦å®Œ ESP32 çš„ hello world å¾Œ, ç¾åœ¨æ¸¬è©¦çš„æ˜¯ TensorFlow Lite Micro çš„ hello_world. é¡ä¼¼ STM32 DISCO_F746NG çš„ Makefile çš„ä½œæ³•</p>
<p>åœ¨ idf.py build é€™æ­¥é©Ÿå‡ºç¾éŒ¯èª¤</p>
<pre><code>$ git clone https://github.com/tensorflow/tensorflow.git
$ cd tensorflow
$ make -f tensorflow/lite/micro/tools/make/Makefile TARGET=esp generate_hello_world_esp_project
$ cd tensorflow/lite/micro/tools/make/gen/esp_xtensa-esp32/prj/hello_world/esp-idf
$ idf.py build

-- Configuring done
CMake Error at /home/rafael/esp/esp-idf/tools/cmake/project.cmake:461 (target_link_libraries):
Error evaluating generator expression:

$&lt;IN_LIST:-DTF_LITE_STATIC_MEMORY,$&lt;TARGET_PROPERTY:__idf_tfmicro,COMPILE_OPTIONS&gt;&gt;
Expression did not evaluate to a known generator expression
Call Stack (most recent call first):
CMakeLists.txt:3 (project)

CMake Error in main/CMakeLists.txt:
Error evaluating generator expression:

$&lt;IN_LIST:-DTF_LITE_STATIC_MEMORY,$&lt;TARGET_PROPERTY:__idf_tfmicro,COMPILE_OPTIONS&gt;&gt;
Expression did not evaluate to a known generator expression

-- Generating done
-- Build files have been written to: /home/rafael/tensorflow/tensorflow/lite/micro/tools/make/gen/esp_xtensa-esp32/prj/hello_world/esp-idf/build
cmake failed with exit code 1</code></pre>
<p>Google å¾Œç™¼ç¾ <a href="https://github.com/tensorflow/tensorflow/issues/42165#issuecomment-751882110">ESP32 Hello World project crashing in the target</a> èªªæ˜ cmake çš„ compile option éœ€è¦ 3.11 ç‰ˆæœ¬ä»¥ä¸Š, æŸ¥äº†æˆ‘çš„ cmake ç‰ˆæœ¬æ˜¯ 3.10.2, æ‰€ä»¥éœ€è¦å‡ç´š</p>
<pre><code>$ cmake --version
cmake version 3.10.2</code></pre>
<p><a href="https://askubuntu.com/questions/829310/how-to-upgrade-cmake-in-ubuntu">cmake å‡ç´šä½œæ³•</a></p>
<pre><code># å¾ https://cmake.org/download/ ä¸‹è¼‰ tar file, åˆ°ä¸‹è¼‰ tar file çš„ç›®éŒ„ä¸‹åŸ·è¡Œ:

$ cd $CMAKE_DOWNLOAD_PATH
$ ./configure
$ make
$ sudo make install</code></pre>
<p>å†åŸ·è¡Œ idf, å¯ä»¥çµæŸå¾é–‹ç™¼æ¿å‚³å›ä¾†çš„ X è·Ÿ Y çš„å€¼</p>
<pre><code>$ idf.py build
$ idf.py -p PORT flash monitor </code></pre>
<p>æé†’ : åŸ·è¡Œ monitor ç¨‹å¼æ™‚, å¦‚æœè¦é›¢é–‹, éœ€è¦æŒ‰ â€˜Ctrlâ€™ + â€˜]â€™ çš„çµ„åˆéµ.</p>
</div>
<div id="riscv-amigo-hello-world" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> åœ¨ MaixPy Amigo (RISC-V CPU) ä¸Šå¯¦ç¾ hello_world</h2>
<div id="å»ºç«‹-maixpy-tool-chains" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> å»ºç«‹ MaixPy tool chains</h3>
<p><span style="color:red">âš ï¸æ³¨æ„ æˆªæ­¢ç›®å‰ç‚ºæ­¢, é‚„æœ‰å•é¡Œ, è«‹ä¸è¦è¼•æ˜“å˜—è©¦, æ­¡è¿æå‡ºæ”¹å–„å»ºè­°</span></p>
<p>ç…§è‘— <a href="https://github.com/sipeed/MaixPy/blob/master/build.md">Build Maixpy from source code</a> æ­¥é©ŸåŸ·è¡Œ</p>
<div id="get-source-code" class="section level4" number="5.4.1.1">
<h4><span class="header-section-number">5.4.1.1</span> Get source code</h4>
<pre><code># Clone by https link
$ git clone https://github.com/sipeed/maixpy.git
# Then get submodules
$ cd maixpy
$ git submodule update --init</code></pre>
</div>
<div id="install-dependencies" class="section level4" number="5.4.1.2">
<h4><span class="header-section-number">5.4.1.2</span> Install dependencies</h4>
<pre><code>$ sudo apt update
$ sudo apt install python3 python3-pip build-essential cmake
$ cd maixpy     # if you ever change directory 
$ pip3 install -r requirements.txt</code></pre>
</div>
<div id="download-toolchain" class="section level4" number="5.4.1.3">
<h4><span class="header-section-number">5.4.1.3</span> Download toolchain</h4>
<p>Download the latest toolchain from <a href="https://github.com/kendryte/kendryte-gnu-toolchain/releases">here</a> (macOS and linux), or <a href="http://dl.cdn.sipeed.com/kendryte-toolchain-ubuntu-amd64-8.2.0-20190409.tar.xz">kendryte-toolchain-ubuntu-amd64-8.2.0-20190409.tar.xz(CDN)</a> (for linux)</p>
<p>And extract to /opt/kendryte-toolchain/</p>
<pre><code>$ cd ~
$ wget http://dl.cdn.sipeed.com/kendryte-toolchain-ubuntu-amd64-8.2.0-20190409.tar.xz
$ sudo tar -Jxvf kendryte-toolchain-ubuntu-amd64-8.2.0-20190409.tar.xz -C /opt
$ ls /opt/kendryte-toolchain/bin</code></pre>
</div>
<div id="configure-project" class="section level4" number="5.4.1.4">
<h4><span class="header-section-number">5.4.1.4</span> Configure project</h4>
<div id="åˆ‡æ›åˆ°-projectshello_world-ç›®éŒ„æˆ–-projectsmaixpy_k210-å¿…é ˆéµå¾ªå®ƒçš„ç›®éŒ„çµæ§‹æ‰å¯ä»¥é †åˆ©åŸ·è¡Œ-åƒç…§-reference-æ–‡ç« èªªæ˜." class="section level5" number="5.4.1.4.1">
<h5><span class="header-section-number">5.4.1.4.1</span> åˆ‡æ›åˆ° projects/hello_world ç›®éŒ„æˆ– projects/maixpy_k210, å¿…é ˆéµå¾ªå®ƒçš„ç›®éŒ„çµæ§‹æ‰å¯ä»¥é †åˆ©åŸ·è¡Œ, åƒç…§ Reference æ–‡ç« èªªæ˜.</h5>
<pre><code>$ cd maixpy
$ cd projects/hello_world
# æˆ–
$ cd maixpy
$ cd projects/maixpy_k210

# æˆ‘çš„ä½œæ³•æ˜¯è¤‡è£½ hello_world åˆ°æ–°çš„ç›®éŒ„ amigo_tflm
$ cd maixpy
$ cp -r projects/hello_world/ projects/amigo_tflm/
$ cd projects/amigo_tflm</code></pre>
</div>
<div id="configure-project-1" class="section level5" number="5.4.1.4.2">
<h5><span class="header-section-number">5.4.1.4.2</span> Configure project</h5>
<p>Usually, just use the default configuration.</p>
<p>If you want to customsize project modules, execute command:</p>
<pre><code>python3 project.py menuconfig</code></pre>
<p>æ¥ä¸‹ä¾†, åœ¨ build ä¹‹å‰, æˆ‘å€‘å…ˆä¸‹è¼‰ tensorflow lite micro ç¨‹å¼</p>
</div>
</div>
</div>
<div id="ä¸‹è¼‰-tensorflow-lite-micro-åŸ·è¡Œ-make-ä¾†ç”¢ç”Ÿ-source-code" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> ä¸‹è¼‰ TensorFlow lite micro, åŸ·è¡Œ make ä¾†ç”¢ç”Ÿ source code</h3>
<div id="é¡ä¼¼-disco_f746ng-çš„ä½œæ³•ä¸‹è¼‰åŠåŸ·è¡Œ-make" class="section level4" number="5.4.2.1">
<h4><span class="header-section-number">5.4.2.1</span> é¡ä¼¼ DISCO_F746NG çš„ä½œæ³•ä¸‹è¼‰åŠåŸ·è¡Œ make</h4>
<pre><code>$ git clone https://github.com/tensorflow/tensorflow.git
$ cd tensorflow
# ä¿®æ”¹ tensorflow å‘½å riscv32_mcu èˆ‡ riscv_mcu / mcu_riscv ä¸ä¸€è‡´è™•
$ mv tensorflow/lite/micro/tools/make/targets/mcu_riscv_makefile.inc \
     tensorflow/lite/micro/tools/make/targets/riscv32_mcu_makefile.inc
$ mv tensorflow/lite/micro/riscv_mcu/ tensorflow/lite/micro/riscv32_mcu/
$ make -f tensorflow/lite/micro/tools/make/Makefile TARGET=riscv32_mcu generate_hello_world_make_project
# source code ä½æ–¼ tensorflow/micro/tools/make/gen/riscv32_mcu_riscv32_mcu_micro/prj/hello_world/make/
$ cd tensorflow/micro/tools/make/gen/riscv32_mcu_riscv32_mcu_micro/prj/hello_world/make/
$ ls
LICENSE  Makefile README_MAKE.md  tensorflow  third_party
# å¯ä»¥å…ˆçœ‹ Makefile çš„å…§å®¹ 
# SRCS := \
# tensorflow/lite/micro/simple_memory_allocator.cc .......
# éœ€è¦å°‡é€™éƒ¨åˆ†çš„ SRCS å…§å®¹è¤‡è£½åˆ° MaixPy çš„ maixpy/projects/amigo_tflm/main/CMakeList.txt çš„ Add source files ä¸‹
# å†åº¦çœ‹äº†å…¨éƒ¨æª”æ¡ˆ, ç™¼ç¾ä¸¦æ²’æœ‰ hello_world çš„ç¨‹å¼åˆ—è¡¨ ğŸ˜„ é‚„æœ‰ä¸€æ®µè·¯è¦èµ°</code></pre>
</div>
</div>
<div id="å°‡-tensforflow-çš„-source-code-æª”æ¡ˆæ•´ç†æˆ-maixipy-tool-chain-çš„æª”æ¡ˆæ¶æ§‹" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> å°‡ tensforflow çš„ source code æª”æ¡ˆæ•´ç†æˆ MaixiPy tool chain çš„æª”æ¡ˆæ¶æ§‹</h3>
<p>ç›®å‰çš„æ¢ç´¢éœ€è¦æ‰‹å‹•æ•´ç†è¨±å¤šæª”æ¡ˆ, è€Œä¸”ç›®å‰ç‚ºæ­¢é‚„æœ‰éŒ¯èª¤, é‚„ä¸ç¢ºå®šå“ªè£¡éœ€è¦ä¿®æ­£</p>
<div id="è¤‡è£½-tensorflow-åŸå§‹ç¢¼åˆ°-maixpy-åŸå§‹æª”ç›®éŒ„" class="section level4" number="5.4.3.1">
<h4><span class="header-section-number">5.4.3.1</span> è¤‡è£½ Tensorflow åŸå§‹ç¢¼åˆ° MaixPy åŸå§‹æª”ç›®éŒ„</h4>
<pre><code>$ cd ~/tensorflow
$ cp -r tensorflow/micro/tools/make/gen/riscv32_mcu_riscv32_mcu_micro/prj/hello_world/make/ \
        ~/maixpy/projects/amigo_tflm
$ cd ~/maixpy/projects/amigo_tflm</code></pre>
</div>
<div id="ä¿®æ”¹-maixpy-build-çš„ç›¸é—œè¨­å®š" class="section level4" number="5.4.3.2">
<h4><span class="header-section-number">5.4.3.2</span> ä¿®æ”¹ MaixPy build çš„ç›¸é—œè¨­å®š</h4>
<ol style="list-style-type: decimal">
<li>ä¿®æ”¹ CMakeList.txt çš„ C/C++ åŸå§‹ç¨‹å¼ç¢¼æª”æ¡ˆè¨­å®š<br />
</li>
</ol>
<ul>
<li>ä¿®æ”¹ ~/maixpy/projects/amigo_tflm/main/CMakeLists.txt æª”æ¡ˆå…§å®¹</li>
</ul>
<pre><code># å°‡ç›®å‰ç›®éŒ„ . è¨­æˆ include ç›®éŒ„
############## Add include ###################
list(APPEND ADD_INCLUDE &quot;.&quot;
   )
# list(APPEND ADD_PRIVATE_INCLUDE &quot;&quot;)
###############################################

# å°‡ä¸Šä¸€å€‹å‹•ä½œçš„çµæœç”¢ç”Ÿçš„ ensorflow/micro/tools/make/gen/riscv32_mcu_riscv32_mcu_micro/prj/hello_world/make/Makefile å…§å®¹
# SRCS := \
# tensorflow/lite/micro/simple_memory_allocator.cc ....... 
# çš„æ‰€æœ‰ .cc æª”æ¡ˆåç¨±è¤‡è£½è²¼ä¸Š, ç”¨é›™å¼•è™Ÿéš”é–‹
############## Add source files ###################
list(APPEND ADD_SRCS
&quot;tensorflow/lite/micro/simple_memory_allocator.c&quot;
.....
   )
###############################################
</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>ä¿®æ”¹ çš„ C/C++ ç·¨è­¯è¨­å®š<br />
</li>
</ol>
<ul>
<li>ä¿®æ”¹ ~/maixpy/projects/amigo_tflm/compile/compile_flags.cmake</li>
</ul>
<pre><code># åŸå…ˆè¨­å®š
set(CMAKE_CXX_FLAGS -mcmodel=medany
...
                    -std=gnu11
# å°‡ -std=gnu11 æ”¹æˆ -std=c++11
set(CMAKE_CXX_FLAGS -mcmodel=medany
...
                    -std=c++11
</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>å‡ºç¾ error</li>
</ol>
<p>References:</p>
<ul>
<li><a href="https://maixpy.sipeed.com/dev/en/advanced/code_struct.html">Sipeed MaixPy å®˜ç¶²</a></li>
<li><a href="https://wiki.sipeed.com/soft/maixpy/zh/">Sipeed MaixPy æ–‡ä»¶èªªæ˜</a></li>
<li><a href="https://github.com/sipeed/MaixPy/blob/master/build.md">Build Maixpy from source code</a></li>
<li><a href="https://github.com/Neutree/c_cpp_project_framework">Simple and configurable C/C++ project/SDK template - CMake</a></li>
</ul>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chap-hello-world-training.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chap-micro-speech-inference.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["TensorFlowLiteMicro_by_marconi1964.pdf", "TensorFlowLiteMicro_by_marconi1964.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
